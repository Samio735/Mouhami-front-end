(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[389],{7285:function(e,t,n){Promise.resolve().then(n.bind(n,4919))},4919:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return h}});var o=n(7437),a=n(7613),r=n(6677),s=n(2376),c=n(1396),l=n.n(c),i=n(4033),u=n(2265);function h(){let e=(0,i.useRouter)(),[t,n]=(0,u.useState)(""),[c,h]=(0,u.useState)(""),[g,f]=(0,u.useState)(""),[m,d]=(0,u.useState)("");return(0,o.jsxs)("div",{className:"w-full flex flex-col gap-6",children:[(0,o.jsx)(s.Y,{type:"email",label:"Email ",classNames:{inputWrapper:"bg-backgroundWhite"},onChange:e=>n(e.target.value)}),(0,o.jsx)(s.Y,{type:"password",label:"Password ",classNames:{inputWrapper:"bg-backgroundWhite"},onChange:e=>h(e.target.value)}),(0,o.jsxs)("button",{onClick:n=>{n.preventDefault(),f(""),d("");try{(0,a.x4)(t,c).then(t=>{t.jwt?(f("Sucess !"),e.push("/home")):d("Login not successfull")})}catch(e){d("Login not successfull")}finally{"Sucess !"==g&&console.log("Sucess !")}},children:[(0,o.jsx)("p",{className:"text-center text-sm text-red-600",children:m}),(0,o.jsx)("p",{className:"text-center text-sm text-green-600",children:g}),(0,o.jsx)(r.Z,{children:(0,o.jsx)("p",{className:"-my-1",children:"Login"})}),(0,o.jsx)("div",{className:"h-6"}),(0,o.jsx)(l(),{href:"/sign-up",className:"pt-8",children:(0,o.jsx)("p",{className:" text-md py-2 text-lighOrange underline",children:" Don't have an account? Sign up !"})})]})]})}},7613:function(e,t,n){"use strict";n.d(t,{Xx:function(){return c},x6:function(){return a},x4:function(){return s},y7:function(){return r}});let o="https://samyrahim.me/api";async function a(){let e=await fetch("".concat(o,"/surveys/"),{cache:"no-store"});if(!e.ok)throw Error("Something went wrong");let t=await e.json();return t}async function r(e,t,n,a){let r=await fetch("".concat(o,"/register/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({first_name:e,last_name:t,email:n,password:a})});if(!r.ok)throw Error("Something went wrong");let s=await r.json();return console.log(s),s}async function s(e,t){try{let n=await fetch("".concat(o,"/login/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})});if(!n.ok)throw Error("Something went wrong");let a=await n.json();return a.jwt?localStorage.setItem("jwt",a.jwt):localStorage.removeItem("jwt"),console.log(a),a}catch(e){console.log(e),localStorage.removeItem("jwt")}}async function c(){try{let e=await fetch("".concat(o,"/user/"),{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({jwt:localStorage.getItem("jwt")})});if(!e.ok)throw Error("Something went wrong");let t=await e.json();return console.log(t),t}catch(e){console.log(e),localStorage.removeItem("jwt");return}}},6677:function(e,t,n){"use strict";var o=n(7437);t.Z=function(e){let{children:t}=e;return(0,o.jsx)("div",{className:"bg-gradient-to-r from-lighOrange to-darkOrange rounded-xl shadow-xl shadow-[#f26f2391] flex flex-col items-center my-1 text-white py-4  px-4 w-full active:opacity-80",children:t})}}},function(e){e.O(0,[685,799,971,596,744],function(){return e(e.s=7285)}),_N_E=e.O()}]);